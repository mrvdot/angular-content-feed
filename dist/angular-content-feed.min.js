!function(a){"use strict";a.module("mvd.contentFeed",["ngSanitize"]).provider("contentConfig",function(){var b={provider:null,pageSize:10,formatters:[],properties:{id:"id",content:"content"}},c={};return this.setOptions=function(a){return c=a,this},this.setProvider=function(a){return c.provider=a,this},this.addFormatter=function(a){return c.formatters||(c.formatters=[]),c.formatters.push(a),this},this.$get=["$injector","$log",function(d,e){var f=a.extend({},b,c);if(!f.provider)throw"Must specify content provider before initializaing content";if(a.isString(f.provider)){if(!d.has(f.provider))throw'Specified provider "'+f.provider+'" not registered with injector';f.provider=d.get(f.provider)}if(f.formatters)for(var g=0,h=f.formatters.length;h>g;g++){var i=f.formatters[g];a.isString(i)&&(d.has(i)?f.formatters[g]=d.get(i):d.has(i+"Filter")?f.formatters[g]=d.get(i+"Filter"):(e.warn("unknown formatter",i,"replacing with identity"),f.formatters[g]=a.identity))}return f}],this}).factory("content",["contentConfig","$timeout",function(b,c){var d,e=b.provider,f=[].slice,g=function(c){var d={limit:b.pageSize};return c?a.extend(d,c):d},h=function(b){return b||(b=a.noop),function(){var a=f.call(arguments,0),d=this;c(function(){b.apply(d,a)})}};return{get:function(a,b,c){var f=e.get(a,h(b),h(c));return d=f,f},current:function(){return d},feed:function(a,b,c){return e.load(g(a),h(b),h(c))}}}]).directive("content",["content",function(a){return{scope:!0,link:function(b){b.feed=a.feed()}}}]).directive("contentElement",["contentConfig",function(a){return{scope:!0,link:function(b,c,d){if(a.formatters.length){var e=function(b){if(!b)return b;for(var c=a.formatters,d=0,e=c.length;e>d;d++){var f=c[d];if(b=f(b),"undefined"==typeof b)break}return b};b.$watch(d.contentElement+"."+a.properties.content,function(a){b.$formattedContent=e(a)})}}}}])}(angular);