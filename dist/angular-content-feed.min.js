!function(a){"use strict";a.module("mvd.contentFeed",["ngSanitize"]).provider("contentConfig",function(){var b={provider:null,pageSize:10,formatters:[],properties:{id:"id",content:"content"}},c={};return this.setOptions=function(a){return c=a,this},this.setProvider=function(a){return c.provider=a,this},this.addFormatter=function(a){return c.formatters||(c.formatters=[]),c.formatters.push(a),this},this.$get=["$injector","$log",function(d,e){var f=a.extend({},b,c);if(!f.provider)throw"Must specify content provider before initializaing content";if(a.isString(f.provider)){if(!d.has(f.provider))throw'Specified provider "'+f.provider+'" not registered with injector';f.provider=d.get(f.provider)}if(f.formatters)for(var g=0,h=f.formatters.length;h>g;g++){var i=f.formatters[g];a.isString(i)&&(d.has(i)?f.formatters[g]=d.get(i):d.has(i+"Filter")?f.formatters[g]=d.get(i+"Filter"):(e.warn("unknown formatter",i,"replacing with identity"),f.formatters[g]=a.identity))}return f}],this}).factory("content",["contentConfig","$timeout",function(a,b){var c,d=a.provider,e=([].slice,function(a){return a?function(){b(a)}:void 0});return{get:function(a,b,f){var g=d.get(a,e(b),e(f));return c=g,g},current:function(){return c},feed:function(b,c,f){return d.load({limit:b||a.pageSize},e(c),e(f))}}}]).directive("content",["content",function(a){return{scope:!0,link:function(b){b.feed=a.feed()}}}]).directive("contentElement",["contentConfig",function(a){return{scope:!0,link:function(b,c,d){if(a.formatters.length){var e=function(b){if(!b)return b;for(var c=a.formatters,d=0,e=c.length;e>d;d++){var f=c[d];if(b=f(b),"undefined"==typeof b)break}return b};b.$watch(d.contentElement+"."+a.properties.content,function(a){b.$formattedContent=e(a)})}}}}])}(angular);